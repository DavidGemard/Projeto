def leListaFicheiroTXT(nomeFicheiroTXT):
    dados = dict()
    file = open(nomeFicheiroTXT,'r')
    pergunta = '--> Pergunta: <--'
    RespostaA = 'Resposta: ...... A'
    RespostaB = 'Resposta: ...... B'
    RespostaC = 'Resposta: ...... C'
    RespostaD = 'Resposta: ...... D'
    open(nomeFicheiroTXT,'r')
    while file.closed == False:
        linha = file.readline().strip()
        while linha != '':
            if linha != RespostaA and linha != RespostaB and linha != RespostaC and linha != RespostaD and linha != pergunta:
                NPerg = linha
                linha = file.readline().strip()
                TextoPerg = linha
                linha = file.readline().strip()
                OpCerta = linha
                linha = file.readline().strip()
                Opcoes = []
                if linha == RespostaA or linha == RespostaB or linha == RespostaC or linha == RespostaD:
                    Opcoes.append(linha)
                    linha = file.readline().strip()
                    if linha == RespostaA or linha == RespostaB or linha == RespostaC or linha == RespostaD:
                        Opcoes.append(linha)
                        linha = file.readline().strip()
                        if linha == RespostaA or linha == RespostaB or linha == RespostaC or linha == RespostaD:
                            Opcoes.append(linha)
                            linha = file.readline().strip()
                            if linha == RespostaA or linha == RespostaB or linha == RespostaC or linha == RespostaD:
                                Opcoes.append(linha)
                                linha = file.readline().strip()
                                dados[NPerg] = [NPerg, TextoPerg, OpCerta, Opcoes]
                        else:
                            linha = file.readline().strip()
                            dados[NPerg] = [NPerg, TextoPerg, OpCerta, Opcoes]
                    dados[NPerg] = [NPerg, TextoPerg, OpCerta, Opcoes]
            else:
                linha = file.readline().strip()           
        else:
            file.close()         
    return dados     

def geradorRespostas(nomeFicheiroTXT):
    import random
    dados = leListaFicheiroTXT(nomeFicheiroTXT)
    listaResposta = []
    for v in dados.values():
        possibilidades = [random.choice(v[3]), '0']
        resposta = random.choice(possibilidades)
        listaResposta.append(resposta)
    return listaResposta

def questoes(nomeFicheiroTXT):
    dados = leListaFicheiroTXT(nomeFicheiroTXT)
    questoes = []
    for k in dados.keys():
        questoes.append(k)
    return questoes
        
def TabelaResultados():
    import csv
    from os.path import isfile
    nomeFicheiroTXT = input('Nome do FicheiroTXT: ')
    while not isfile(nomeFicheiroTXT):
        nomeFicheiroTXT = input('Nome do FicheiroTXT: ')
    nomeFicheiroCSV = input('Nome do FicheiroCSV: ')
    while not isfile(nomeFicheiroCSV):
        nomeFicheiroCSV = input('Nome do FicheiroCSV: ')
    f = open(nomeFicheiroCSV,'r')
    csv_reader = csv.reader(f)
    open(nomeFicheiroCSV,'r')
    with open('Alunos_RES.csv', 'w') as output:
        writer = csv.writer(output)
        questao = questoes(nomeFicheiroTXT)
        colunas = ['Alunos']
        colunas.extend(questao)
        writer.writerow(colunas)
        for line in csv_reader:
            listaline = []
            listaResposta = []
            listaline.append(line)
            listaResposta = geradorRespostas(nomeFicheiroTXT)
            listaline.extend(listaResposta)
            line = f.readline().strip()
            writer.writerow(listaline)
            if line == []:
                line = f.readline().strip()
                if line == []:
                    f.close()